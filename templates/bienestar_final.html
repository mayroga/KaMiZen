<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>KaMiZen - El Destino</title>
    <style>
        body { margin: 0; background: white; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .final-card { text-align: center; max-width: 600px; animation: fadeIn 3s ease; }
        .logo { font-size: 2.5rem; letter-spacing: 5px; margin-bottom: 20px; }
        .texto-final { font-size: 1.4rem; color: #333; line-height: 1.8; margin-bottom: 40px; }
        .btn-restart { background: none; border: 1px solid #1a1a1a; padding: 15px 30px; cursor: pointer; transition: 0.4s; }
        .btn-restart:hover { background: #1a1a1a; color: white; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>
    <div class="final-card">
        <div class="logo">KaMiZen</div>
        <div id="mensaje-final" class="texto-final">Has completado el camino. Tu riqueza interna es ahora más sólida.</div>
        <button class="btn-restart" onclick="terminar()">CERRAR Y REINICIAR</button>
        <p style="margin-top: 30px; color: #999; font-size: 0.8rem;">El bienestar crece al compartirse. Invita a otros al camino.</p>
    </div>

    <audio id="audio-final"></audio>

    <script>
        async function cargarCierre() {
            const res = await fetch('/api/get_sequence?lang=es');
            const data = await res.json();
            document.getElementById('mensaje-final').innerText = data.texto;

            const audio = document.getElementById('audio-final');
            audio.src = `/api/get_audio?text=${encodeURIComponent(data.texto)}`;
            audio.play();
        }

        function terminar() {
            // Limpieza absoluta según reglas
            window.location.href = '/logout';
        }

        window.onload = cargarCierre;
    </script>
</body>
</html>
