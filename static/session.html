<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>KaMiZen - Sesi√≥n diaria</title>
<link rel="stylesheet" href="/static/style.css">
<style>
body { background:#111; color:#eee; font-family: Arial, sans-serif; }
#sessionContainer { max-width:800px; margin:auto; padding:20px; }
#participants,#timeRemaining,#feedback,#ranking,#miniGame,#stories { margin-bottom:10px; }
#questionBox,#miniGame { background:#222; padding:15px; border-radius:8px; margin-bottom:10px; font-size:1.2em; }
#answerInput,#chatInput { width:100%; padding:10px; margin-bottom:5px; border-radius:5px; border:none; }
#chatBox { background:#222; padding:10px; height:200px; overflow-y:auto; border-radius:8px; margin-bottom:10px; }
button { padding:10px 20px; border:none; border-radius:5px; background:#ff4d4d; color:#fff; font-weight:bold; cursor:pointer; margin-right:5px; }
button:hover { background:#ff1a1a; }
.timer { font-size:1.2em; font-weight:bold; }
.chatMessage { margin-bottom:4px; }
.simulated { color:#ffcc00; font-weight:bold; }
#rankingList { margin-top:5px; }
.level { font-weight:bold; color:#00ffcc; }
.miniGameBtn { background:#00ccff; color:#111; font-weight:bold; }
.story { background:#333; padding:10px; border-radius:5px; margin-bottom:5px; font-style:italic; color:#ffcc00; }
</style>
</head>
<body>
<div id="sessionContainer">
    <h1>KaMiZen - Sesi√≥n diaria</h1>

    <div id="participants">üî• Conectados: 1/500</div>
    <div class="timer">‚è≥ Tiempo restante: <span id="timeRemaining">10:00</span></div>
    <div id="ranking">
        üèÜ Top 5 del momento
        <div id="rankingList"></div>
    </div>

    <div id="questionBox">Cargando pregunta...</div>
    <input type="text" id="answerInput" placeholder="Escribe tu respuesta aqu√≠...">
    <button onclick="sendAnswer()">Enviar</button>
    <div id="feedback"></div>

    <!-- Mini-juegos mentales y adivinanzas -->
    <div id="miniGame">
        <strong>Mini-Juego Mental:</strong> <span id="miniGameQuestion">Cargando...</span><br>
        <div id="miniGameButtons"></div>
        <div id="miniGameFeedback"></div>
    </div>

    <!-- Historias cortas de √©xito, poder y bienestar -->
    <div id="stories">
        <strong>Historias cortas:</strong>
        <div id="storyBox">Cargando historias...</div>
    </div>

    <h3>Chat en vivo (an√≥nimo)</h3>
    <div id="chatBox">Cargando chat...</div>
    <input type="text" id="chatInput" placeholder="Escribe mensaje...">
    <button onclick="sendChat()">Enviar</button>

    <audio id="sessionAudio" autoplay></audio>
</div>

<script src="/static/app.js"></script>
<script>
// ==================================
// Mini-juegos y adivinanzas
// ==================================
const miniGames = [
    {question:"Vuelo sin alas, cruzo fronteras sin pasaporte y guardo tesoros sin ser cofre. ¬øQu√© soy?", options:["Conocimiento de embarque","Avi√≥n","Maleta"], answer:0},
    {question:"Suma r√°pida: 45 + 32 = ?", options:["77","78","79"], answer:1},
    {question:"¬øQu√© es lo √∫nico que sube y nunca baja, pero te hace sentir m√°s ligero si lo compartes?", options:["Esperanza","Dinero","√âxito"], answer:0}
];
const miniGameQuestionEl = document.getElementById("miniGameQuestion");
const miniGameButtonsEl = document.getElementById("miniGameButtons");
const miniGameFeedbackEl = document.getElementById("miniGameFeedback");

function loadMiniGame() {
    const game = miniGames[Math.floor(Math.random()*miniGames.length)];
    miniGameQuestionEl.innerText = game.question;
    miniGameButtonsEl.innerHTML = "";
    game.options.forEach((opt,i)=>{
        const btn = document.createElement("button");
        btn.classList.add("miniGameBtn");
        btn.innerText = opt;
        btn.onclick = ()=>checkMiniGame(game,i);
        miniGameButtonsEl.appendChild(btn);
    });
}

function checkMiniGame(game,index) {
    if(index === game.answer){
        miniGameFeedbackEl.innerText = "üí• Correcto! Dopamina activada!";
    } else {
        miniGameFeedbackEl.innerText = `‚ùå Incorrecto! La respuesta era "${game.options[game.answer]}"`;
    }
    setTimeout(loadMiniGame,3000);
}

// ==================================
// Historias cortas motivadoras
// ==================================
const stories = [
    "üí∞ Cerr√© un trato millonario hoy sin perder tiempo",
    "üî• Nadie me supera en decisi√≥n r√°pida",
    "‚ö° Cada segundo cuenta para subir de nivel",
    "üèÜ Sub√≠ un nivel gracias a mi disciplina",
    "üí• Cada palabra cuenta, act√∫a ya"
];
const storyBox = document.getElementById("storyBox");

function loadStory() {
    const story = stories[Math.floor(Math.random()*stories.length)];
    storyBox.innerText = story;
}

// ==================================
// Inicializar mini-juego e historias
// ==================================
loadMiniGame();
setInterval(loadMiniGame, 60000); // Cambia mini-juego cada 1 min
loadStory();
setInterval(loadStory, 45000); // Cambia historia cada 45s

</script>
</body>
</html>
